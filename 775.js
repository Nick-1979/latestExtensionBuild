(()=>{var t,e,n={18983:()=>{},44914:(t,e,n)=>{"use strict";var o=n(52107),r=n(95292),a=n(60576),i=n(38090),l=n(13249),s=n(6222);const u=async function(t){if(t.startsWith("wss")){const e=new a.U(t);return await i.G.create({provider:e})}if(t.startsWith("light"))return await async function(t){const e=(t=>{if(!t)return;const e=t.split("/")[3];return e.charAt(0).toUpperCase()+e.slice(1)})(t),n=(t=>{switch(t){case"Polkadot":return l.WellKnownChain.polkadot;case"Kusama":return l.WellKnownChain.ksmcc3;case"Westend":return l.WellKnownChain.westend2;default:return""}})(e);try{if(console.log("connecting through light client, endpoint:",t),n.length){const t=new s.x(l,n);return await t.connect(),await i.G.create({provider:t})}return Promise.reject(new Error(`Unsupported network: ${e}`))}catch(t){return Promise.reject(t)}}(t);throw new Error(`Invalid endpoint: ${t}`)};var c=Number.isNaN||function(t){return"number"==typeof t&&t!=t};function d(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!((o=t[n])===(r=e[n])||c(o)&&c(r)))return!1;var o,r;return!0}var p=n(64021),f=n(51330),m=n(57928);const g=new Uint8Array(32),h=(0,p.d)("modl");function v(t,e,n){return t.registry.createType("AccountId32",(0,f.e)(h,t.consts.nominationPools.palletId.toU8a(),new Uint8Array([n]),(0,m.a)(e,{bitLength:32}),g)).toString()}const w=function(t,e){void 0===e&&(e=d);var n=null;function o(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];if(n&&n.lastThis===this&&e(o,n.lastArgs))return n.lastResult;var a=t.apply(this,o);return n={lastResult:a,lastArgs:o,lastThis:this},a}return o.clear=function(){n=null},o}((function(t,e){return{rewardId:v(t,e,1),stashId:v(t,e,0)}}));onmessage=t=>{const{address:e,endpoint:n}=t.data;(async function(t,e){var n;const a=await u(e),i=await a.query.nominationPools.lastPoolId();if(console.log(`getMyPools: Getting ${i.toNumber()} pools information.`),!i)return null;const l=[];for(let t=1;t<=i.toNumber();t++)l.push(Promise.all([a.query.nominationPools.metadata(t),a.query.nominationPools.bondedPools(t),a.query.nominationPools.rewardPools(t)]));const s=(null==(n=(await Promise.all(l)).map(((t,e)=>{if(t[1].isSome){var n,o,r,a,i;const l=t[1].unwrap();return{bondedPool:{commission:l.commission,memberCounter:String(l.memberCounter),points:String(l.points),roles:l.roles,state:l.state},metadata:null!=(n=t[0])&&n.length?null!=(o=t[0])&&o.isUtf8?null==(r=t[0])?void 0:r.toUtf8():null==(a=t[0])?void 0:a.toString():null,poolId:e+1,rewardPool:null!=(i=t[2])&&i.isSome?t[2].unwrap():null}}})))?void 0:n.filter((t=>void 0!==t))).filter((e=>{var n,o,r;return String(null==e||null==(n=e.bondedPool)?void 0:n.roles.root)===t||String(null==e||null==(o=e.bondedPool)?void 0:o.roles.nominator)===t||String(null==e||null==(r=e.bondedPool)?void 0:r.roles.bouncer)===t})),c=a.registry.chainTokens[0],d=a.registry.chainDecimals[0],p=s.map((async t=>{var e;const n=w(a,t.poolId);if(!n)return console.log(`can not find a pool with id:${t.poolId}`),null;const[i,l,s]=await Promise.all([a.query.nominationPools.rewardPools(t.poolId),a.query.system.account(n.rewardId),a.derive.staking.account(n.stashId)]),u=i.isSome?i.unwrap():null,p=(0,o.x)(r.nw,l.data.free.sub(a.consts.balances.existentialDeposit)),f={};return u&&(f.balance=null!=u&&u.balance?String(u.balance):void 0,f.points=null!=u&&u.points?String(u.points):void 0,f.totalEarnings=null!=u&&u.totalEarnings?String(u.totalEarnings):void 0),{accounts:n,bondedPool:t.bondedPool,decimal:d,member:void 0,metadata:null!=(e=t.metadata)&&e.length?t.metadata.isUtf8?t.metadata.toUtf8():t.metadata.toString():null,myClaimable:Number("0"),poolId:t.poolId,rewardClaimable:Number(p),rewardIdBalance:l.data,rewardPool:u,stashIdAccount:s,token:c}})),f=await Promise.all(p);return JSON.stringify(f)})(e,n).then((t=>{postMessage(t)}))}}},o={};function r(t){var e=o[t];if(void 0!==e)return e.exports;var a=o[t]={id:t,loaded:!1,exports:{}};return n[t].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.m=n,r.x=()=>{var t=r.O(void 0,[89,952],(()=>r(44914)));return r.O(t)},t=[],r.O=(e,n,o,a)=>{if(!n){var i=1/0;for(c=0;c<t.length;c++){for(var[n,o,a]=t[c],l=!0,s=0;s<n.length;s++)(!1&a||i>=a)&&Object.keys(r.O).every((t=>r.O[t](n[s])))?n.splice(s--,1):(l=!1,a<i&&(i=a));if(l){t.splice(c--,1);var u=o();void 0!==u&&(e=u)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[n,o,a]},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.f={},r.e=t=>Promise.all(Object.keys(r.f).reduce(((e,n)=>(r.f[n](t,e),e)),[])),r.u=t=>t+".js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),(()=>{var t={775:1};r.f.i=(e,n)=>{t[e]||importScripts(r.p+r.u(e))};var e=("undefined"!=typeof self?self:this).webpackChunk_polkadot_extension=("undefined"!=typeof self?self:this).webpackChunk_polkadot_extension||[],n=e.push.bind(e);e.push=e=>{var[o,a,i]=e;for(var l in a)r.o(a,l)&&(r.m[l]=a[l]);for(i&&i(r);o.length;)t[o.pop()]=1;n(e)}})(),e=r.x,r.x=()=>Promise.all([r.e(89),r.e(952)]).then(e),r.x()})();